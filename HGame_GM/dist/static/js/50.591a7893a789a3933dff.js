webpackJsonp([50],{1116:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(938),a=r.n(n),i=r(858),o=r.n(i);e.default={name:"ExtraDropActivity",components:{},data:function(){var t=this;return{page:{sizeOpts:[10,20,30,40],current:1,pageSize:10},tableModal:{open:!1,title:"dsfaf",sn:!1},formData:{},datas:[],columns:[{type:"index",width:60,align:"center"},{title:"活动ID",key:"id"},{title:"活动名称",key:"name"},{title:"备注",key:"remark"},{title:"时间类型",key:"timeType",render:function(e,r){return e("span",new o.a(t.timeType).get(r.row.timeType))}},{title:"活动时间",key:"activeTime",ellipsis:!0,minWidth:45,render:function(e,r){var n=r.row.activeTime.split(",");return e("Tooltip",{props:{placement:"right-end"}},[r.row.itemStr,e("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},t.timeChange_(n))])}},{title:"开服时间",key:"openServerTime"},{title:"权重",key:"weight"},{title:"图片URL",key:"imgUrl",render:function(t,e){return t("Tooltip",{props:{placement:"right-end",theme:"light"}},[e.row.imgUrl,t("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},e.row.imgUrl)])}},{title:"明细",key:"itemStr",ellipsis:!0,tooltip:!0,render:function(t,e){return t("Tooltip",{props:{placement:"right-end",theme:"light"}},[e.row.itemStr,t("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},e.row.itemStr)])}},{title:"info",key:"info"},{title:"jumpId",key:"jumpId"},{title:"状态",key:"open",render:function(e,r){return e("span",new o.a(t.status).get(r.row.open))}},{title:"操作",key:"action",width:120,render:function(e,r){return e("div",[e("Button",{props:{type:"primary",size:"small"},on:{click:function(){return t.editModal("修改ID为"+r.row.id+"的活动",r.row)}}},"修改"),e("Button",{props:{type:"primary",size:"small"},on:{click:function(){return t.editModal("ID为"+r.row.id+"的活动详情",r.row)}}},"详情")])}}],serverIdItems:void 0,reloadType:[[1,"清空当前活动"],[2,"活动数据归零"]],status:[[1,"开启"],[0,"禁用"]],timeType:[[1,"开服时间"],[2,"自然时间"]],seachParams:{serverName:void 0,id:void 0,type:void 0}}},watch:{datas:function(t){this.page.current=1}},methods:{reloadActivity:function(){var t=this;this.validateSeachParam()||this.apiList4._get_(window.apiUrl.api_reloadExtraDropActivity,this.seachParams,function(e){return t.$Message.error("操作失败："+e)},function(e){t.$Message.success("操作成功")})},updateOrCreate:function(){var t=this;this.apiList4._postj_(window.apiUrl.api_addOrUpdateExtraDropActivity,this.formData,function(e){return t.$Message.error("操作失败："+e)},function(e){t.$Message.success("操作成功"),t.tableModal.open=!1})},editModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tableModal.title=t,this.tableModal.open=!0,this.formData=e,e.id?this.tableModal.sn=!1:this.tableModal.sn=!0},divisionData:function(){return this.datas.slice((this.page.current-1)*this.page.pageSize,this.page.current*this.page.pageSize)},queryItems:function(){var t=this;if(!this.validateSeachParam()){this.apiList4._get_(window.apiUrl.api_ExtraDropActivity,function(t){var e={};for(var r in t)t[r]&&(e[r]="startDate"===r||"endDate"===r?t[r].getTime():t[r]);return e}(this.seachParams),function(t){},function(e){return t.datas=e})}},validateSeachParam:function(){return!this.seachParams.serverName&&this.mesgInfo("serverIds 不能为空")},mesgInfo:function(t){return this.$Message.info({content:t,duration:5}),!0},timeChange:function(t){var e=new Date(t);return e.getFullYear()+"-"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-")+((e.getDate()<10?"0"+e.getDate():e.getDate())+" ")+((e.getHours()<10?"0"+e.getHours():e.getHours())+":")+((e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":")+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},timeChange_:function(t){for(var e=this,r=new Array,n=null,i=0;i<t.length;i++)i%2==0&&(n=new Array,r.push(n)),n.push(a()(t[i]));return r.map(function(t){return t.map(e.timeChange).join(" 至 ")}).join("<br/>")}},mounted:function(){this.serverIdItems=this.apiList3.api_spirityluckcontroller_server()}}},1534:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",{staticStyle:{width:"900px"}},[t._v("\n    服务器ID：\n    "),r("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择服务器id",transfer:""},model:{value:t.seachParams.serverName,callback:function(e){t.$set(t.seachParams,"serverName",e)},expression:"seachParams.serverName"}},t._l(t.serverIdItems,function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.text))])}),1),t._v("\n    活动ID：\n    "),r("Input",{staticStyle:{width:"160px"},attrs:{placeholder:"log_type"},model:{value:t.seachParams.id,callback:function(e){t.$set(t.seachParams,"id",e)},expression:"seachParams['id']"}}),t._v(" "),r("Button",{attrs:{icon:"ios-search"},on:{click:function(e){t.queryItems()}}},[t._v("查询")]),t._v(" "),r("Button",{attrs:{icon:"ios-search"},on:{click:function(e){t.editModal("新增额外掉落活动")}}},[t._v("新增")]),r("br"),t._v("\n    重载类型：\n    "),r("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择重载类型...",transfer:""},model:{value:t.seachParams.type,callback:function(e){t.$set(t.seachParams,"type",e)},expression:"seachParams['type']"}},t._l(t.reloadType,function(e){return r("Option",{key:e[0],attrs:{value:e[0]}},[t._v(t._s(e[1]))])}),1),t._v(" "),r("Button",{attrs:{icon:"ios-search"},on:{click:t.reloadActivity}},[t._v("重载")])],1),t._v(" "),r("Table",{attrs:{columns:t.columns,height:"800",data:t.divisionData(),"show-header":""}},[r("h1",{attrs:{slot:"header"},slot:"header"},[t._v("额外掉落活动")]),t._v(" "),r("Page",{attrs:{slot:"footer",total:t.datas.length,"show-total":"",size:"small",current:t.page.current,"page-size-opts":t.page.sizeOpts,page_size:t.page.pageSize,"show-elevator":"","show-sizer":""},on:{"on-change":function(e){return t.page.current=e},"on-page-size-change":function(e){return t.page.pageSize=e}},slot:"footer"})],1),t._v(" "),r("Modal",{attrs:{loading:"","mask-closable":!1,width:890},on:{"on-ok":t.updateOrCreate},model:{value:t.tableModal.open,callback:function(e){t.$set(t.tableModal,"open",e)},expression:"tableModal.open"}},[r("h2",{staticStyle:{color:"red"},attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.tableModal.title))]),t._v(" "),r("Form",{attrs:{model:t.formData,"label-position":"left",inline:"","label-width":100}},[t.tableModal.sn?t._e():r("span",[r("FormItem",[t._v("\n          服务器ID：\n          "),r("Select",{staticStyle:{width:"160px"},attrs:{placeholder:"选择服务器id",transfer:""},model:{value:t.formData.serverName,callback:function(e){t.$set(t.formData,"serverName",e)},expression:"formData.serverName"}},t._l(t.serverIdItems,function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.text))])}),1)],1),t._v(" "),r("FormItem",[t._v("\n          活动的ID："),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"id..."},model:{value:t.formData.id,callback:function(e){t.$set(t.formData,"id",e)},expression:"formData['id']"}}),t._v("\n          活动名称："),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"name..."},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData['name']"}})],1)],1),t._v(" "),t.tableModal.sn?r("span",[r("FormItem",[t._v("\n             服务器ID：\n          "),r("Select",{staticStyle:{width:"160px"},attrs:{placeholder:"选择服务器id",transfer:""},model:{value:t.formData.serverName,callback:function(e){t.$set(t.formData,"serverName",e)},expression:"formData.serverName"}},t._l(t.serverIdItems,function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.text))])}),1),t._v("\n              活动名称："),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"name..."},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData['name']"}})],1)],1):t._e(),t._v(" "),r("FormItem",[t._v("\n          活动备注： "),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"remark..."},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData['remark']"}}),t._v("\n          时间类型：\n          "),r("Select",{staticStyle:{width:"160px"},attrs:{placeholder:"open...",transfer:""},model:{value:t.formData.timeType,callback:function(e){t.$set(t.formData,"timeType",e)},expression:"formData['timeType']"}},t._l(t.timeType,function(e){return r("Option",{key:e[0],attrs:{value:e[0]}},[t._v(t._s(e[1]))])}),1)],1),t._v(" "),r("FormItem",[t._v("\n          活动时间： "),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"activeTime..."},model:{value:t.formData.activeTime,callback:function(e){t.$set(t.formData,"activeTime",e)},expression:"formData['activeTime']"}}),t._v("\n          开服时间："),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"openServerTime..."},model:{value:t.formData.openServerTime,callback:function(e){t.$set(t.formData,"openServerTime",e)},expression:"formData['openServerTime']"}})],1),t._v(" "),r("FormItem",[t._v("\n          活动权重： "),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"weight..."},model:{value:t.formData.weight,callback:function(e){t.$set(t.formData,"weight",e)},expression:"formData['weight']"}}),t._v("\n          图片URL："),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"imgUrl..."},model:{value:t.formData.imgUrl,callback:function(e){t.$set(t.formData,"imgUrl",e)},expression:"formData['imgUrl']"}})],1),t._v(" "),r("FormItem",[t._v("\n          活动明细： "),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"itemStr..."},model:{value:t.formData.itemStr,callback:function(e){t.$set(t.formData,"itemStr",e)},expression:"formData['itemStr']"}}),t._v("\n          活动INFO："),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"info..."},model:{value:t.formData.info,callback:function(e){t.$set(t.formData,"info",e)},expression:"formData['info']"}})],1),t._v(" "),r("FormItem",[t._v("\n          活动jumpId： "),r("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"jumpId..."},model:{value:t.formData.jumpId,callback:function(e){t.$set(t.formData,"jumpId",e)},expression:"formData['jumpId']"}}),t._v("\n          活动状态：\n          "),r("Select",{staticStyle:{width:"160px"},attrs:{placeholder:"open...",transfer:""},model:{value:t.formData.open,callback:function(e){t.$set(t.formData,"open",e)},expression:"formData['open']"}},t._l(t.status,function(e){return r("Option",{key:e[0],attrs:{value:e[0]}},[t._v(t._s(e[1]))])}),1)],1)],1)],1)],1)},staticRenderFns:[]}},837:function(t,e,r){var n=r(54)(r(1116),r(1534),null,null,null);t.exports=n.exports},853:function(t,e,r){var n=r(169)("meta"),a=r(64),i=r(79),o=r(76).f,s=0,l=Object.isExtensible||function(){return!0},c=!r(107)(function(){return l(Object.preventExtensions({}))}),u=function(t){o(t,n,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,n)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[n].i},getWeak:function(t,e){if(!i(t,n)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[n].w},onFreeze:function(t){return c&&f.NEED&&l(t)&&!i(t,n)&&u(t),t}}},854:function(t,e,r){var n=r(64);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},858:function(t,e,r){t.exports={default:r(859),__esModule:!0}},859:function(t,e,r){r(388),r(382),r(383),r(870),r(873),r(872),r(871),t.exports=r(21).Map},860:function(t,e,r){var n=r(379);t.exports=function(t,e){var r=[];return n(t,!1,r.push,r,e),r}},861:function(t,e,r){var n=r(75),a=r(384),i=r(168),o=r(167),s=r(863);t.exports=function(t,e){var r=1==t,l=2==t,c=3==t,u=4==t,f=6==t,p=5==t||f,d=e||s;return function(e,s,m){for(var v,h,_=i(e),g=a(_),y=n(s,m,3),w=o(g.length),D=0,k=r?d(e,w):l?d(e,0):void 0;w>D;D++)if((p||D in g)&&(h=y(v=g[D],D,_),t))if(r)k[D]=h;else if(h)switch(t){case 3:return!0;case 5:return v;case 6:return D;case 2:k.push(v)}else if(u)return!1;return f?-1:c||u?u:k}}},862:function(t,e,r){var n=r(64),a=r(867),i=r(22)("species");t.exports=function(t){var e;return a(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!a(e.prototype)||(e=void 0),n(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},863:function(t,e,r){var n=r(862);t.exports=function(t,e){return new(n(t))(e)}},864:function(t,e,r){"use strict";var n=r(76).f,a=r(386),i=r(381),o=r(75),s=r(380),l=r(379),c=r(166),u=r(385),f=r(387),p=r(55),d=r(853).fastKey,m=r(854),v=p?"_s":"size",h=function(t,e){var r,n=d(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,c){var u=t(function(t,n){s(t,u,e,"_i"),t._t=e,t._i=a(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=n&&l(n,r,t[c],t)});return i(u.prototype,{clear:function(){for(var t=m(this,e),r=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var r=m(this,e),n=h(r,t);if(n){var a=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=a),a&&(a.p=i),r._f==n&&(r._f=a),r._l==n&&(r._l=i),r[v]--}return!!n},forEach:function(t){m(this,e);for(var r,n=o(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!h(m(this,e),t)}}),p&&n(u.prototype,"size",{get:function(){return m(this,e)[v]}}),u},def:function(t,e,r){var n,a,i=h(t,e);return i?i.v=r:(t._l=i={i:a=d(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=i),n&&(n.n=i),t[v]++,"F"!==a&&(t._i[a]=i)),t},getEntry:h,setStrong:function(t,e,r){c(t,e,function(t,r){this._t=m(t,e),this._k=r,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?u(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,u(1))},r?"entries":"values",!r,!0),f(e)}}},865:function(t,e,r){var n=r(165),a=r(860);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return a(this)}}},866:function(t,e,r){"use strict";var n=r(15),a=r(53),i=r(853),o=r(107),s=r(56),l=r(381),c=r(379),u=r(380),f=r(64),p=r(108),d=r(76).f,m=r(861)(0),v=r(55);t.exports=function(t,e,r,h,_,g){var y=n[t],w=y,D=_?"set":"add",k=w&&w.prototype,x={};return v&&"function"==typeof w&&(g||k.forEach&&!o(function(){(new w).entries().next()}))?(w=e(function(e,r){u(e,w,t,"_c"),e._c=new y,void 0!=r&&c(r,_,e[D],e)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in k&&(!g||"clear"!=t)&&s(w.prototype,t,function(r,n){if(u(this,w,t),!e&&g&&!f(r))return"get"==t&&void 0;var a=this._c[t](0===r?0:r,n);return e?this:a})}),g||d(w.prototype,"size",{get:function(){return this._c.size}})):(w=h.getConstructor(e,t,_,D),l(w.prototype,r),i.NEED=!0),p(w,t),x[t]=w,a(a.G+a.W+a.F,x),g||h.setStrong(w,t,_),w}},867:function(t,e,r){var n=r(78);t.exports=Array.isArray||function(t){return"Array"==n(t)}},868:function(t,e,r){"use strict";var n=r(53),a=r(77),i=r(75),o=r(379);t.exports=function(t){n(n.S,t,{from:function(t){var e,r,n,s,l=arguments[1];return a(this),(e=void 0!==l)&&a(l),void 0==t?new this:(r=[],e?(n=0,s=i(l,arguments[2],2),o(t,!1,function(t){r.push(s(t,n++))})):o(t,!1,r.push,r),new this(r))}})}},869:function(t,e,r){"use strict";var n=r(53);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},870:function(t,e,r){"use strict";var n=r(864),a=r(854);t.exports=r(866)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(a(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(a(this,"Map"),0===t?0:t,e)}},n,!0)},871:function(t,e,r){r(868)("Map")},872:function(t,e,r){r(869)("Map")},873:function(t,e,r){var n=r(53);n(n.P+n.R,"Map",{toJSON:r(865)("Map")})},921:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},938:function(t,e,r){t.exports={default:r(939),__esModule:!0}},939:function(t,e,r){r(942),t.exports=r(21).Number.parseInt},940:function(t,e,r){var n=r(15).parseInt,a=r(941).trim,i=r(921),o=/^[-+]?0[xX]/;t.exports=8!==n(i+"08")||22!==n(i+"0x16")?function(t,e){var r=a(String(t),3);return n(r,e>>>0||(o.test(r)?16:10))}:n},941:function(t,e,r){var n=r(53),a=r(109),i=r(107),o=r(921),s="["+o+"]",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),u=function(t,e,r){var a={},s=i(function(){return!!o[t]()||"​"!="​"[t]()}),l=a[t]=s?e(f):o[t];r&&(a[r]=l),n(n.P+n.F*s,"String",a)},f=u.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(c,"")),t};t.exports=u},942:function(t,e,r){var n=r(53),a=r(940);n(n.S+n.F*(Number.parseInt!=a),"Number",{parseInt:a})}});