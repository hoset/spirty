webpackJsonp([55],{1112:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(933),n=a.n(r);t.default={name:"FlashSaleActivity",components:{},data:function(){var e=this;return{page:{sizeOpts:[10,20,30,40],current:1,pageSize:10},tableModal:{open:!1,title:"dsfaf",sn:!1},formData:{},datas:[],columns:[{type:"index",width:60,align:"center"},{title:"活动ID",key:"id"},{title:"活动名称",key:"name"},{title:"备注",key:"remark"},{title:"时间类型",key:"timeType"},{title:"活动时间",key:"activeTime",ellipsis:!0,minWidth:45,render:function(t,a){var r=a.row.activeTime.split(",");return t("Tooltip",{props:{placement:"right-end"}},[a.row.itemStr,t("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},e.timeChange_(r))])}},{title:"开服时间",key:"openServerTime"},{title:"权重",key:"weight"},{title:"图片URL",key:"imgUrl",render:function(e,t){return e("Tooltip",{props:{placement:"right-end",theme:"light"}},[t.row.imgUrl,e("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},t.row.imgUrl)])}},{title:"明细",key:"itemStr",ellipsis:!0,tooltip:!0,render:function(e,t){return e("Tooltip",{props:{placement:"right-end",theme:"light"}},[t.row.itemStr,e("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},t.row.itemStr)])}},{title:"状态",key:"open"},{title:"操作",key:"action",width:120,render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){return e.editModal("修改ID为"+a.row.id+"的活动",a.row)}}},"修改"),t("Button",{props:{type:"primary",size:"small"},on:{click:function(){return e.editModal("ID为"+a.row.id+"的活动详情",a.row)}}},"详情")])}}],serverIdItems:void 0,reloadType:[[1,"清空当前活动"],[2,"活动数据归零"]],seachParams:{serverName:void 0,id:void 0,type:void 0}}},watch:{datas:function(e){this.page.current=1}},methods:{reloadActivity:function(){var e=this;this.validateSeachParam()||this.apiList4._get_(window.apiUrl.api_reloadFlashSale,this.seachParams,function(t){return e.$Message.error("操作失败："+t)},function(t){e.$Message.success("操作成功")})},updateOrCreate:function(){var e=this;this.apiList4._postj_(window.apiUrl.api_addOrUpdateFlashSale,this.formData,function(t){return e.$Message.error("操作失败："+t)},function(t){e.$Message.success("操作成功"),e.tableModal.open=!1})},editModal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tableModal.title=e,this.tableModal.open=!0,this.formData=t,t.id?this.tableModal.sn=!1:this.tableModal.sn=!0},divisionData:function(){return this.datas.slice((this.page.current-1)*this.page.pageSize,this.page.current*this.page.pageSize)},queryItems:function(){var e=this;if(!this.validateSeachParam()){this.apiList4._get_(window.apiUrl.api_FlashSale,function(e){var t={};for(var a in e)e[a]&&(t[a]="startDate"===a||"endDate"===a?e[a].getTime():e[a]);return t}(this.seachParams),function(e){},function(t){return e.datas=t})}},validateSeachParam:function(){return!this.seachParams.serverName&&this.mesgInfo("serverIds 不能为空")},mesgInfo:function(e){return this.$Message.info({content:e,duration:5}),!0},timeChange:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},timeChange_:function(e){for(var t=this,a=new Array,r=null,o=0;o<e.length;o++)o%2==0&&(r=new Array,a.push(r)),r.push(n()(e[o]));return a.map(function(e){return e.map(t.timeChange).join(" 至 ")}).join("<br/>")}},mounted:function(){this.serverIdItems=this.apiList3.api_spirityluckcontroller_server()}}},1554:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",{staticStyle:{width:"900px"}},[e._v("\n    服务器ID：\n    "),a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择服务器id",transfer:""},model:{value:e.seachParams.serverName,callback:function(t){e.$set(e.seachParams,"serverName",t)},expression:"seachParams.serverName"}},e._l(e.serverIdItems,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.text))])})),e._v("\n    活动ID：\n    "),a("Input",{staticStyle:{width:"160px"},attrs:{placeholder:"log_type"},model:{value:e.seachParams.id,callback:function(t){e.$set(e.seachParams,"id",t)},expression:"seachParams['id']"}}),e._v(" "),a("Button",{attrs:{icon:"ios-search"},on:{click:function(t){e.queryItems()}}},[e._v("查询")]),e._v(" "),a("Button",{attrs:{icon:"ios-search"},on:{click:function(t){e.editModal("新增额外掉落活动")}}},[e._v("新增")]),a("br"),e._v("\n    重载类型：\n    "),a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择重载类型...",transfer:""},model:{value:e.seachParams.type,callback:function(t){e.$set(e.seachParams,"type",t)},expression:"seachParams['type']"}},e._l(e.reloadType,function(t){return a("Option",{key:t[0],attrs:{value:t[0]}},[e._v(e._s(t[1]))])})),e._v(" "),a("Button",{attrs:{icon:"ios-search"},on:{click:e.reloadActivity}},[e._v("重载")])],1),e._v(" "),a("Table",{attrs:{columns:e.columns,height:"800",data:e.divisionData(),"show-header":""}},[a("h1",{attrs:{slot:"header"},slot:"header"},[e._v("限时抢购")]),e._v(" "),a("Page",{attrs:{slot:"footer",total:e.datas.length,"show-total":"",size:"small",current:e.page.current,"page-size-opts":e.page.sizeOpts,page_size:e.page.pageSize,"show-elevator":"","show-sizer":""},on:{"on-change":function(t){return e.page.current=t},"on-page-size-change":function(t){return e.page.pageSize=t}},slot:"footer"})],1),e._v(" "),a("Modal",{attrs:{loading:"","mask-closable":!1,width:890},on:{"on-ok":e.updateOrCreate},model:{value:e.tableModal.open,callback:function(t){e.$set(e.tableModal,"open",t)},expression:"tableModal.open"}},[a("h2",{staticStyle:{color:"red"},attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.tableModal.title))]),e._v(" "),a("Form",{attrs:{model:e.formData,"label-position":"left",inline:"","label-width":100}},[e.tableModal.sn?e._e():a("span",[a("FormItem",[e._v("\n          服务器ID：\n          "),a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择服务器id",transfer:""},model:{value:e.formData.serverName,callback:function(t){e.$set(e.formData,"serverName",t)},expression:"formData.serverName"}},e._l(e.serverIdItems,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.text))])}))],1),e._v(" "),a("FormItem",[e._v("\n          活动的ID："),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"id..."},model:{value:e.formData.id,callback:function(t){e.$set(e.formData,"id",t)},expression:"formData['id']"}}),e._v("\n          活动名称："),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"name..."},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData['name']"}})],1)],1),e._v(" "),e.tableModal.sn?a("span",[a("FormItem",[e._v("\n             服务器ID：\n          "),a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择服务器id",transfer:""},model:{value:e.formData.serverName,callback:function(t){e.$set(e.formData,"serverName",t)},expression:"formData.serverName"}},e._l(e.serverIdItems,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.text))])})),e._v("\n              活动名称："),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"name..."},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData['name']"}})],1)],1):e._e(),e._v(" "),a("FormItem",[e._v("\n          活动备注： "),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"remark..."},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData['remark']"}}),e._v("\n          时间类型："),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"timeType..."},model:{value:e.formData.timeType,callback:function(t){e.$set(e.formData,"timeType",t)},expression:"formData['timeType']"}})],1),e._v(" "),a("FormItem",[e._v("\n          活动时间： "),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"activeTime..."},model:{value:e.formData.activeTime,callback:function(t){e.$set(e.formData,"activeTime",t)},expression:"formData['activeTime']"}}),e._v("\n          开服时间："),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"openServerTime..."},model:{value:e.formData.openServerTime,callback:function(t){e.$set(e.formData,"openServerTime",t)},expression:"formData['openServerTime']"}})],1),e._v(" "),a("FormItem",[e._v("\n          活动权重： "),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"weight..."},model:{value:e.formData.weight,callback:function(t){e.$set(e.formData,"weight",t)},expression:"formData['weight']"}}),e._v("\n          图片URL："),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"imgUrl..."},model:{value:e.formData.imgUrl,callback:function(t){e.$set(e.formData,"imgUrl",t)},expression:"formData['imgUrl']"}})],1),e._v(" "),a("FormItem",[e._v("\n          活动明细： "),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"itemStr..."},model:{value:e.formData.itemStr,callback:function(t){e.$set(e.formData,"itemStr",t)},expression:"formData['itemStr']"}}),e._v("\n          活动INFO："),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"info..."},model:{value:e.formData.info,callback:function(t){e.$set(e.formData,"info",t)},expression:"formData['info']"}})],1),e._v(" "),a("FormItem",[e._v("\n          活动jumpId： "),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"jumpId..."},model:{value:e.formData.jumpId,callback:function(t){e.$set(e.formData,"jumpId",t)},expression:"formData['jumpId']"}}),e._v("\n          活动状态："),a("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"open..."},model:{value:e.formData.open,callback:function(t){e.$set(e.formData,"open",t)},expression:"formData['open']"}})],1)],1)],1)],1)},staticRenderFns:[]}},833:function(e,t,a){var r=a(54)(a(1112),a(1554),null,null,null);e.exports=r.exports},916:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},933:function(e,t,a){e.exports={default:a(934),__esModule:!0}},934:function(e,t,a){a(937),e.exports=a(21).Number.parseInt},935:function(e,t,a){var r=a(15).parseInt,n=a(936).trim,o=a(916),i=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var a=n(String(e),3);return r(a,t>>>0||(i.test(a)?16:10))}:r},936:function(e,t,a){var r=a(53),n=a(107),o=a(105),i=a(916),s="["+i+"]",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),m=function(e,t,a){var n={},s=o(function(){return!!i[e]()||"​"!="​"[e]()}),l=n[e]=s?t(u):i[e];a&&(n[a]=l),r(r.P+r.F*s,"String",n)},u=m.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=m},937:function(e,t,a){var r=a(53),n=a(935);r(r.S+r.F*(Number.parseInt!=n),"Number",{parseInt:n})}});