webpackJsonp([59],{1017:function(e,a,t){"use strict";t.d(a,"a",function(){return n}),a.b=function(e,a){var t=new Date(a),n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e};var n={rankType:[{id:1,name:"跨服石英大会排行"},{id:2,name:"跨服石英大会每日排行（0点）"},{id:3,name:"石英大会"},{id:4,name:"对战塔"},{id:5,name:"世界boss个人排行"},{id:6,name:"战力大比拼排名"},{id:7,name:"武道馆排名"},{id:8,name:"公会副本排行"},{id:9,name:"跨服石英大会决赛排行"},{id:10,name:"联盟战排行"},{id:11,name:"联盟战每日积分排行"},{id:12,name:"限时精灵排行"},{id:13,name:"馆主次数排行"},{id:14,name:"道馆占领次数排行"}],userTypes:[{id:1,name:"免费用户"},{id:2,name:"付费用户"},{id:3,name:"全部用户"}]}},1180:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t(1017);a.default={name:"rankLog",data:function(){return{formData:{serverId:"",channelId:"",channelAppId:"",startTime:"",endTime:""},channelId:[],channelIds:[],ranklogConfig:n.a,paginations:{pageSize:10,pageCurrent:1,pageSizes:[10,20,30,40],pageNum:0,layout:"total, sizes, prev, pager, next, jumper"},serverDatas:[],allDatas:[],tableDatas:[],props:{value:"value",label:"label",children:"children"},rules:{startTime:[{required:!0,message:"请选择时间",trigger:"blur"}],channelId:[{required:!0,message:"请选择子渠道",trigger:"change"}]}}},components:{},methods:{handleChange:function(e){this.formData.serverId=e[0],this.formData.channelId=e[1],this.formData.channelAppId=e[2]},getServerGroup:function(){var e=this;this.apiList4._get_(window.apiUrl.api_condition,{},function(e){},function(a){e.serverDatas=a;for(var t=[],n=0;n<a.length;n++)t.push(a[n]);for(var r=[],i=0;i<t.length;i++){r.push({value:t[i].serverId,label:t[i].serverName,children:[]});for(var l=0;l<t[i].channelIds.length;l++){r[i].children.push({value:t[i].channelIds[l].channelId,label:t[i].channelIds[l].channelName,children:[]});for(var s=0;s<t[i].channelIds[l].channelAppIds.length;s++)r[i].children[l].children.push({value:t[i].channelIds[l].channelAppIds[s].channelAppId,label:t[i].channelIds[l].channelAppIds[s].channelAppName})}}e.channelIds=r},!1)},logSubmit:function(e){var a=this;this.$refs[e].validate(function(e){var t=a;if(e){var n={serverId:a.formData.serverId,channelId:a.formData.channelId,channelAppId:a.formData.channelAppId,startTime:a.formData.startTime?a.formData.startTime[0]:"",endTime:a.formData.startTime?a.formData.startTime[1]:""};a.apiList4._postj_(window.apiUrl.api_querynewsletterhourdata,n,function(e){t.$Message.error(e.statusText),t.allDatas=[],t.setPaginations()},function(e){e.length>0?(t.allDatas=e,t.setPaginations()):(t.$Message.error("暂无数据！"),t.allDatas=[],t.setPaginations())})}})},downloading:function(){var e={serverId:this.formData.serverId,channelId:this.formData.channelId,channelAppId:this.formData.channelAppId,startTime:this.formData.startTime?this.formData.startTime[0]:"",endTime:this.formData.startTime?this.formData.startTime[1]:""},a=this;this.apiList4._postj_(window.apiUrl.api_createfile,e,function(e){a.$Message.error("下载失败")},function(e){e.fileName;var a=document.createElement("a");a.href=window.config.dev.baseServerUrl+"/game_boss_schudler/newsletterhourdatacontroller/download?fileName="+e.fileName,a.click()})},setPaginations:function(){var e=this;this.paginations.pageCurrent=1,this.paginations.pageNum=this.allDatas.length,this.tableDatas=this.allDatas.filter(function(a,t){return t<e.paginations.pageSize})},handleSizeChange:function(e){this.paginations.pageSize=e,this.tableDatas=this.allDatas.filter(function(a,t){return t<e})},handleCurrentChange:function(e){var a=this,t=this.paginations.pageSize*(e-1),n=this.allDatas.filter(function(e,a){return a>=t});this.tableDatas=n.filter(function(e,t){return t<a.paginations.pageSize})},formatterTime:function(e){return e.logDate?t.i(n.b)("yyyy-MM-dd hh:mm:ss",e.logDate):""},formatterActivePayProp:function(e){return e.activePayProp+"%"},formatterMoney:function(e){return e.newRechargeProp+"%"}},created:function(){this.getServerGroup()}}},1261:function(e,a,t){(e.exports=t(880)(!0)).push([e.i,".list-lb[data-v-4766267c]{background:#fff;padding:10px}.demo-form-inline[data-v-4766267c]{margin-top:20px;border:1px solid #dcdcdc;padding:20px 10px}.table[data-v-4766267c]{margin-bottom:10px}","",{version:3,sources:["D:/hb/spirty/HGame_GM/src/components/pages/info/hourData.vue"],names:[],mappings:"AACA,0BACE,gBAAiB,AACjB,YAAc,CACf,AACD,mCACE,gBAAiB,AACjB,yBAA4B,AAC5B,iBAAmB,CACpB,AACD,wBACE,kBAAoB,CACrB",file:"hourData.vue",sourcesContent:["\n.list-lb[data-v-4766267c] {\n  background: #fff;\n  padding: 10px;\n}\n.demo-form-inline[data-v-4766267c] {\n  margin-top: 20px;\n  border: 1px solid gainsboro;\n  padding: 20px 10px;\n}\n.table[data-v-4766267c] {\n  margin-bottom: 10px;\n}\n"],sourceRoot:""}])},1579:function(e,a,t){var n=t(1261);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t(881)("ecee30ec",n,!0,{})},1653:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"list-lb"},[t("h3",[e._v("小时数据")]),e._v(" "),t("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formData,rules:e.rules}},[t("el-form-item",{attrs:{label:"选择服务器/渠道/子渠道",prop:"channelId"}},[t("el-cascader",{staticStyle:{width:"350px","margin-right":"20px"},attrs:{"expand-trigger":"hover",options:e.channelIds},on:{change:e.handleChange},model:{value:e.channelId,callback:function(a){e.channelId=a},expression:"channelId"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"查询时间",prop:"startTime"}},[t("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.formData.startTime,callback:function(a){e.$set(e.formData,"startTime",a)},expression:"formData.startTime"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.logSubmit("form")}}},[e._v("查询")])],1),e._v(" "),e.allDatas.length>0?t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.downloading()}}},[t("i",{staticClass:"el-icon-download"}),e._v("导出exec表")])],1):e._e()],1),e._v(" "),t("div",{staticClass:"table"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableDatas,border:""}},[t("el-table-column",{attrs:{prop:"logDate",label:"日期",align:"center",formatter:e.formatterTime}}),e._v(" "),t("el-table-column",{attrs:{prop:"hour",label:"时间（小时）",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createRole",label:"创建量",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"activeNum",label:"活跃量",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"totalMoney",label:"流水量",align:"center"}})],1),e._v(" "),t("el-pagination",{attrs:{"current-page":e.paginations.pageCurrent,"page-sizes":e.paginations.pageSizes,"page-size":e.paginations.pageSize,layout:e.paginations.layout,total:e.paginations.pageNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.$set(e.paginations,"pageCurrent",a)}}})],1)],1)},staticRenderFns:[]}},898:function(e,a,t){var n=t(64)(t(1180),t(1653),function(e){t(1579)},"data-v-4766267c",null);e.exports=n.exports}});